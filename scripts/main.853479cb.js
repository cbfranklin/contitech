var conti={};$(function(){"use strict";conti.init()}),conti.init=function(){"use strict";var a="http://conticontent.geometrysites.com/Services/content.asmx/ContiDataGet1",b=$.ajax({dataType:"json",url:a,mimeType:"application/json",success:function(a){console.log("service XHR success"),console.log(a),conti.loadSections(a),conti.hello()}});b.fail(function(){console.log("service XHR fail");var a="data/content.json",b=$.ajax({dataType:"json",url:a,mimeType:"application/json",success:function(a){console.log("backup XHR success"),console.log(a),conti.loadSections(a),conti.hello()}});b.fail(function(){console.log("backup XHR fail")})})},conti.hello=function(){conti.getWindowDimensions(),conti.setStickyAbility(),conti.navigation(),conti.parallax(),conti.whatAbility(),conti.buttons(),conti.WOW=new WOW({mobile:!1}).init(),$("#form-submit").on("click",function(a){conti.formSubmit(),a.preventDefault()}),conti.debouncedResize(function(){conti.getWindowDimensions(),conti.delay(function(){conti.setStickyAbility(),conti.setNavDimensions()},100)}),$(window).scrollStopped(function(){conti.windowDimensions.width>768&&conti.delay(conti.scrollAdjust,1e3)}),conti.delay(function(){$(".wrapper").addClass("init")},250)},conti.buttons=function(){$("#button-contact").on("click",function(a){conti.scrollTo($("#contact")),a.preventDefault()}),$("#button-what-ability").on("click",function(a){conti.scrollTo($("#what-ability")),a.preventDefault()})},conti.getWindowDimensions=function(){"use strict";var a=$(window).height(),b=$(window).width();conti.windowDimensions={width:b,height:a+1},conti.setSectionHeight(),conti.updateNavigation()},conti.setStickyAbility=function(){"use strict";$("#sticky-ability").css({left:$("#discover-ability .ability-hidden").offset().left,top:$("#discover-ability .ability-hidden").offset().top-$("#discover-ability").offset().top-40})},conti.setNavDimensions=function(){if(conti.windowDimensions.width>768){var a=conti.windowDimensions.height-135-100;$("#nav-ability").css({height:a})}else $("#nav-ability").css({height:""})},conti.loadSections=function(a){"use strict";var b=$("#templates .template-ability").html(),c=Mustache.render(b,a);$("#discover-ability").after(c),b=$("#templates .nav-ability").html(),c=Mustache.render(b,a),$("#nav-ability").html(c),b=$("#templates .left-hand-ability").html(),conti.leftHandAbilities=conti.leftHandAbilities.concat(conti.leftHandAbilities),c=Mustache.render(b,conti.leftHandAbilities),$("#left-hand-ability").html(c),conti.sections=[{el:"add-more-ability",navAbility:!1},{el:"discover-ability",navAbility:!0,stickyAbility:!0}];for(var d in a)conti.sections.push({el:a[d].prefix+"-ability",navAbility:!0});conti.sections.push({el:"what-ability",navAbility:!1}),conti.sections.push({el:"contact",navAbility:!1}),conti.swiper.instances={},$.each(conti.sections,function(a){var b=conti.sections[a].el;conti.swiper[b]=new Swiper("#"+b+" .swiper-container",{loop:!0,pagination:"#"+b+" .swiper-pagination",nextButton:"#"+b+" .swiper-button-next",prevButton:"#"+b+" .swiper-button-prev"})})},conti.swiper={},conti.mobileNav={toggle:function(){var a=$(".menu-toggle");a.hasClass("active")?$("#nav-ability").removeClass("open"):($("#nav-ability").addClass("open"),$(window).width()<480&&window.scrollTo(0,0)),$("body").toggleClass("nav-open"),setTimeout(function(){a.toggleClass("active")},250)},close:function(){var a=$(".menu-toggle");$("#nav-ability").removeClass("open"),a.removeClass("active")},open:function(){var a=$(".menu-toggle");$("#nav-ability").addClass("open"),$(window).width()<480&&window.scrollTo(0,0),a.addClass("active")}},conti.setSectionHeight=function(){"use strict";$("section").css({"min-height":conti.windowDimensions.height,height:"auto"})},conti.parallax=function(){"use strict";conti.parallax.controller=new ScrollMagic.Controller({globalSceneOptions:{tweenChanges:!0}}),conti.parallax.scene={foreground:{},background:{}},$.each(conti.sections,function(a,b){{var c=b.el,d=b.navAbility;b.stickyAbility,TweenMax.to("#"+c+" .parallax-background",.6,{opacity:1}),TweenMax.to("#"+c+" .parallax-foreground",.6,{opacity:1})}conti.parallax.scene.leftHandAbility=new ScrollMagic.Scene({triggerElement:"body",duration:"11844",offset:"0",tweenChanges:!1}).setTween("#left-hand-ability",{y:"-=20%",ease:Linear.easeInOut}).addTo(conti.parallax.controller),conti.parallax.scene.foreground[c]=new ScrollMagic.Scene({triggerElement:"#"+c,triggerHook:"onEnter",duration:"125%",offset:"0"}).addTo(conti.parallax.controller),"add-more-ability"!==c&&conti.parallax.scene.foreground[c].setTween("#"+c+" .parallax-foreground",{y:"20%",ease:Linear.easeInOut}),conti.parallax.scene.background[c]=new ScrollMagic.Scene({triggerElement:"#"+c,triggerHook:.1,duration:"110%",offset:"0.1"}).setTween("#"+c+" .parallax-background",{y:"20%",ease:Linear.easeInOut}).addTo(conti.parallax.controller),conti.parallax.scene.background[c].on("enter",function(a){conti.updateCurrentScene(a)}),d?conti.parallax.scene.background[c].on("enter",conti.updateNavigation):conti.parallax.scene.background[c].on("enter",conti.hideNavigation)}),conti.parallax.scene.foreground["add-more-ability"].on("enter",conti.hideNavigation)},conti.navigation=function(){"use strict";$("#nav-ability a").on("click",function(a){conti.mobileNav.close(),$("#nav-ability a").removeClass("active"),$(this).addClass("active");var b=$(this).attr("data-ability");"discover"===b?conti.scrollTo($("#discover-ability"),20):conti.scrollTo($("#"+b+"-ability")),a.preventDefault()}),$("#scroll-for-more-ability").on("click",function(){conti.scrollTo($("#discover-ability"),20)}),$("#back-to-top").on("click",function(){conti.scrollTo($("#add-more-ability"),0)}),$(".menu-toggle").on("click",function(a){conti.mobileNav.toggle(),a.preventDefault()})},conti.updateNavigation=function(a){"use strict";if(conti.windowDimensions.width>768?$("#nav-ability").show():$("#nav-ability").hide(),a)var b=a.target.triggerElement().id.replace("-ability","");$("#nav-ability a").removeClass("active"),$('#nav-ability a[data-ability="'+b+'"]').addClass("active")},conti.hideNavigation=function(){"use strict";conti.windowDimensions.width>768&&$("#nav-ability").hide()},conti.whatAbility=function(){"use strict";function a(){""!==$("#blank").val()&&void 0!==$("#blank").val()&&(setTimeout(function(){$("#blank-ability em").addClass("animated pulse"),setTimeout(function(){$("#blank-ability em").removeClass("animated pulse")},1e3)},500),$("#blank").addClass("animated pulse"),setTimeout(function(){$("#blank").removeClass("animated pulse")},1e3))}$("#blank").val(""),$("#blank").on("keyup",function(){conti.delay(a,1e3)})},conti.scrollTo=function(a,b,c){"use strict";b||(b=0),c||(c=1e3),$("html, body").animate({scrollTop:a.offset().top+b},c)},conti.delay=function(){"use strict";var a=0;return function(b,c){clearTimeout(a),a=setTimeout(b,c)}}(),conti.updateCurrentScene=function(a){conti.currentScene=$("#"+a.target.triggerElement().id)},conti.leftHandAbilities=["market","expand","adapt","credit","foresee","solve","account","profit","depend","support","affect","target","service","protect","assure","knowledge","deliver","trust","process","control","sustain"],conti.currentScene="",conti.scrollAdjust=function(){var a=Math.abs(conti.currentScene.offset().top-$(window).scrollTop()),b=a/conti.windowDimensions.height;.25>b&&conti.windowDimensions.width>768&&("discover-ability"===conti.currentScene.attr("id")?conti.scrollTo(conti.currentScene,20,500):conti.scrollTo(conti.currentScene,0,500))},conti.debouncedResize=function(a,b){return onresize=function(){clearTimeout(b),b=setTimeout(a,100)},a},conti.formSubmit=function(){var a={};a.sName=$("#form-name").val(),a.sEmail=$("#form-email").val(),a.sContent=$("#form-content").val(),a.sAbility=$("#blank").val();var b=JSON.stringify(a);$.ajax({type:"POST",data:b,url:"http://conticontent.geometrysites.com/Services/content.asmx/ContiEmailSend",contentType:"application/json; charset=utf-8"}).always(function(){$(".content-form").hide(),$(".content-form-success").show(),conti.scrollTo($("#what-ability"),0,0)})},$.fn.scrollStopped=function(a){var b=this,c=$(b);c.scroll(function(d){clearTimeout(c.data("scrollTimeout")),c.data("scrollTimeout",setTimeout(a.bind(b),1e3,d))})};